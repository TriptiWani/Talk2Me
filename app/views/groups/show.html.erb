<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQhiJp0Ee3xKve1KYOLfVY0kF9lHF1xrc"></script>
<div class="groupview">
  <div class="group_header">
    <div class="group_header_left">
      <%= cl_image_tag @group.grp_image %>
    </div>
    <div class="group_header_right">
      <div class="group_name">
        <%= @group.grp_name %>
      </div>
      <div class="add_contact">
      </div>
    </div>
  </div>
  <div class="group_body">
    <div class="group_body_left">
      <div class="group_body_left_top">
        <div class="group_body_left_top_1">
          <%= link_to "Edit Group", edit_group_path(@group) %>
        </div>
        <div class="group_body_left_top_2">
          <label for="usersearch">Add User</label>
          <input type="text" name="usernamesearch" id="search" placeholder="@name"></input>
        </div>
        <%#= form_tag(users_path, method: "get") do %>
            <!-- <label for="usersearch">Add User</label>
            <input type="text" name="usernamesearch" id="search" placeholder="@name"></input>
            <input type="text" name="group_id" hidden="true" value="<%= @group.id %>"></input> -->
      <!-- "<span class='glyphicon glyphicon-search' aria-hidden='true'></span>".html-safe -->
            <%#= submit_tag "Search", class: "searchButton" %>
          <%# end %>
      </div>
      <div class="group_body_left_bottom">
        <label for="users">Members:</label>
        <ul class="group_members_list">
          <% @group.users.each do |contact| %>
            <li>
              <% if (contact).eql?(@current_user) %>
                <% group_member_name = 'Me' %>
              <% else %>
                <% group_member_name = contact.name %>
              <% end %>
              <% if (contact.id).eql?(@group.grp_admin_id) %>
                <%= link_to group_member_name , contact, :class => 'glyphicon glyphicon-king' %>
                <%= link_to (cl_image_tag contact.image , :class => 'user_image') , contact  %>
              <% else %>
                <%= link_to group_member_name , contact , :class => 'glyphicon glyphicon-pawn'%>
                <%= link_to (cl_image_tag contact.image , :class => 'user_image') , contact  %>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  
    <div class="group_body_right">
      <div class="panel panel-default">
        <div>
          <% if @group.messages.count > 10 %>
            <p class="old_messages">View older messages</p>
          <% end %>
        </div>
        <% if @group.messages.any? %>
          <div class="panel-body" id="messages">
            <%= render partial: 'messages/message', collection: @group.messages.order('created_at desc').take(10).reverse%>
          </div>
        <%else%>
          <div class="panel-body hidden" id="messages">
          </div>
        <%end%>
      </div>

        <%= render partial: 'messages/message_form', locals: {message: @message, group: @group}%>
    </div>
  </div>
</div>
